<!-- Barra de navegacion superior e izquierda -->
<%= render "shared_partials/navigation_menu"%>

<div id="page-wrapper">
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">Requerimientos Realizados al <%=@area.areaname%></h1>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        Requerimientos Pendientes Asignados
                    </div>
                    <div class="panel-body">
                        <%=form_tag assign_requests_requests_path do %>
                            <div class="row">
                                <div class="col-md-4">
                                    <%=hidden_field_tag :areaid, @area.id%>
                                    <%=select_tag :receiverid, options_for_select(@receivers.collect{|u| [u.firstname+" "+u.lastname, u.id]}), {:prompt => "Seleccionar Usuario", :class => "form-control"}%>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <div class="input-group date" id='datepicker1' data-date-format="DD/MM/YYYY">
                                            <%=text_field_tag :duedate, "", :class => "form-control", :placeholder => "Fecha Límite"%>
                                            <span class="input-group-addon"><i class="fa fa-calendar"></i>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <%=submit_tag "Asignar a usuario",:class => "btn btn-default"%>
                                </div>
                            </div>
                            <div class="table-responsive">
                                <div id="unassigned-requests-table">
                                <%=render :partial => "area_requests_table", :locals => {:requests => @u_requests, :tableid => "u-requests-table"}%>
                                </div>
                            </div>
                        <%end%>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        Requerimientos Pendientes sin Asignar
                    </div>
                    <div class="panel-body">
                        <%=form_tag assign_requests_requests_path do %>
                            <div class="row">
                                <div class="col-md-4">
                                    <%=hidden_field_tag :areaid, @area.id%>
                                    <%=select_tag :receiverid, options_for_select(@receivers.collect{|u| [u.firstname+" "+u.lastname, u.id]}), {:prompt => "Seleccionar Usuario", :class => "form-control"}%>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <div class="input-group date" id='datepicker2' data-date-format="DD/MM/YYYY">
                                            <%=text_field_tag :duedate, "", :class => "form-control", :placeholder => "Fecha Límite"%>
                                            <span class="input-group-addon"><i class="fa fa-calendar"></i>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <%=submit_tag "Asignar a usuario",:class => "btn btn-default"%>
                                </div>
                            </div>
                            <div class="table-responsive">
                                <div id="assigned-requests-table">
                                <%=render :partial => "area_requests_table", :locals => {:requests => @a_requests, :tableid => "a-requests-table"}%>
                                </div>
                            </div>
                        <%end%> <!-- end form -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $(function () {
        $('#datepicker1').datetimepicker({
            pickTime: false
        });
    });
</script>
<script type="text/javascript">
    $(function () {
        $('#datepicker2').datetimepicker({
            pickTime: false
        });
    });
</script>
<script>
$(document).ready(function() {
    $('#a-requests-table').dataTable();
});
</script>
<script>
$(document).ready(function() {
    $('#u-requests-table').dataTable();
});
</script>